---
output: 
  html_document:
    theme: null
    highlight: null
    mathjax: null
---

```{r setup_main, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
library('yaml')
source('DataHelpers.R')
```

## What is this?
This is a set of parameterised r-markdown files designed to automatically detect features and build ensemble models for regression and classification tasks

----

## Analysis Iterator
The analysis iterator runs the analysis markdown file against each of the analyses in this folder.
``` {r run analyses predictions, results = 'hide'}

start_time <- Sys.time()

#1 get all analyses
par_path <- parent_path()
analyses <-  list.dirs(path = paste(par_path, "./Output/", sep =""), full.names = TRUE, recursive = FALSE)
for (analysis in analyses) {
  # parameters
  paras <-  read_yaml(paste(analysis, 'parameters.yml', sep = '/'))
  # render
  rmarkdown::render(input = 'Analysis.rmd', output_dir = analysis, params = paras)
}

end_time <- Sys.time()
```

* The last analysis iterator ran at: `r start_time`
* It ran: `r length(analyses)` analyses
* It took: `r end_time - start_time` s
